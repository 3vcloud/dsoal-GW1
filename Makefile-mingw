CC      = gcc
CFLAGS  = -g -O2 -D_WIN32 -DWINELESS -DDEBUG_INFO=0xF -ID:/Libs/OpenAL-1.1/include -Wall -pipe -fno-strict-aliasing -Wdeclaration-after-statement -Wstrict-prototypes -Wwrite-strings -Wpointer-arith
DLLWRAP = dllwrap

MODULE = dsound.dll
LIBS   = -lOpenAL32 -ldxerr8 -luuid -lwinmm -lole32

C_SRCS = \
	debug.c \
	buffer.c \
	capture.c \
	dsound8.c \
	dsound_main.c \
	duplex.c \
	primary.c \
	propset.c \
	regsvr.c

OBJS = $(C_SRCS:.c=.o)

DEF = dsound-mingw.def

.PHONY: all

.c.o:
	$(CC) -c $(CFLAGS) -o $@ $<

all: $(MODULE)

$(MODULE): $(OBJS)
	$(DLLWRAP) --def $(DEF) --dllname DSOUND.dll -L. -o $@ $(OBJS) $(LIBS)

